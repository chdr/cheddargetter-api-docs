
<!doctype html>
<html>
  <head>
      <!-- Google Tag Manager -->
      
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P4BFKHD');</script>

      <!-- End Google Tag Manager -->
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Cheddar API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;php&quot;,&quot;ruby&quot;]">
      <!-- Google Tag Manager (noscript) -->
      
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P4BFKHD"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

      <!-- End Google Tag Manager (noscript) -->
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <h4>API Reference</h4>
      <img src="images/logo.svg" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cUrl</a>
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="ruby">ruby</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#how-does-it-work" class="toc-h1 toc-link" data-title="How Does It Work?">How Does It Work?</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#ok-that-39-s-nice-but-how-do-i-use-it" class="toc-h2 toc-link" data-title="Ok, That's Nice But How Do I Use It?">Ok, That's Nice But How Do I Use It?</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#open-source-wrappers" class="toc-h1 toc-link" data-title="Open Source Wrappers">Open Source Wrappers</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#ruby" class="toc-h2 toc-link" data-title="Ruby">Ruby</a>
                  </li>
                  <li>
                    <a href="#php" class="toc-h2 toc-link" data-title="PHP">PHP</a>
                  </li>
                  <li>
                    <a href="#python" class="toc-h2 toc-link" data-title="Python">Python</a>
                  </li>
                  <li>
                    <a href="#node-js" class="toc-h2 toc-link" data-title="Node.js">Node.js</a>
                  </li>
                  <li>
                    <a href="#java" class="toc-h2 toc-link" data-title="Java">Java</a>
                  </li>
                  <li>
                    <a href="#c-35" class="toc-h2 toc-link" data-title="C#">C#</a>
                  </li>
                  <li>
                    <a href="#coldfusion" class="toc-h2 toc-link" data-title="ColdFusion">ColdFusion</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#support" class="toc-h1 toc-link" data-title="Support">Support</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#api-knowledge-base" class="toc-h2 toc-link" data-title="API Knowledge Base">API Knowledge Base</a>
                  </li>
                  <li>
                    <a href="#general-knowledge-base" class="toc-h2 toc-link" data-title="General Knowledge Base">General Knowledge Base</a>
                  </li>
                  <li>
                    <a href="#public-and-private-discussion" class="toc-h2 toc-link" data-title="Public and Private Discussion">Public and Private Discussion</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#request-response-format" class="toc-h1 toc-link" data-title="Request/Response Format">Request/Response Format</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authentication" class="toc-h2 toc-link" data-title="Authentication">Authentication</a>
                  </li>
                  <li>
                    <a href="#request" class="toc-h2 toc-link" data-title="Request">Request</a>
                  </li>
                  <li>
                    <a href="#response" class="toc-h2 toc-link" data-title="Response">Response</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#request-dictionary" class="toc-h1 toc-link" data-title="Request Dictionary">Request Dictionary</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#pricing-plans" class="toc-h2 toc-link" data-title="Pricing Plans">Pricing Plans</a>
                  </li>
                  <li>
                    <a href="#customers" class="toc-h2 toc-link" data-title="Customers">Customers</a>
                  </li>
                  <li>
                    <a href="#subscriptions" class="toc-h2 toc-link" data-title="Subscriptions">Subscriptions</a>
                  </li>
                  <li>
                    <a href="#tracked-items" class="toc-h2 toc-link" data-title="Tracked Items">Tracked Items</a>
                  </li>
                  <li>
                    <a href="#invoice-interactions" class="toc-h2 toc-link" data-title="Invoice Interactions">Invoice Interactions</a>
                  </li>
                  <li>
                    <a href="#promotions" class="toc-h2 toc-link" data-title="Promotions">Promotions</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#current-vs-outstanding-invoice" class="toc-h1 toc-link" data-title="Current vs. Outstanding Invoice">Current vs. Outstanding Invoice</a>
          </li>
          <li>
            <a href="#response-codes" class="toc-h1 toc-link" data-title="Response Codes">Response Codes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#http-status-codes" class="toc-h2 toc-link" data-title="HTTP Status Codes">HTTP Status Codes</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#error-messages" class="toc-h1 toc-link" data-title="Error Messages">Error Messages</a>
          </li>
          <li>
            <a href="#fraud-protection-rate-limiting" class="toc-h1 toc-link" data-title="Fraud Protection, Rate Limiting">Fraud Protection, Rate Limiting</a>
          </li>
          <li>
            <a href="#webhooks-reverse-api-callbacks" class="toc-h1 toc-link" data-title="Webhooks, Reverse API, Callbacks">Webhooks, Reverse API, Callbacks</a>
          </li>
      </ul>
      <ul class="toc-footer">
        <li><a href="https://getcheddar.com">Go to Cheddar</a></li>
        <li><a href="https://github.com/tripit/slate">Documentation Powered by Slate</a></li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box">
        <div class="ribbon right green">
          <a href="https://github.com/chdr/cheddargetter-api-docs">Fork me on GitHub</a>
        </div>
      </div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>The Cheddar API enables you to leverage the full power of Cheddar
directly into your custom application. You can use our API with any programming
language to integrate the recurring billing and subscription management
processes curated by Cheddar.</p>
<h1 id='how-does-it-work'>How Does It Work?</h1>
<p>Our API utilizes a REST-like interface where method calls are made by sending
HTTP GET or POST requests.  Response data is returned in XML format.</p>

<p>The response contains an HTTP status code of 200 for a successful request.
A status code of 400 or greater is returned upon an adverse condition.
That makes handling errors quite simple.</p>
<h2 id='ok-that-39-s-nice-but-how-do-i-use-it'>Ok, That&#39;s Nice But How Do I Use It?</h2>
<p>First, I suggest reviewing our <a href="#open-source-wrappers">Open Source Wrappers</a>
available for you to use.  They make integrating quite easy.</p>

<p>You&#39;re also welcome to write your own code to work with the API. If you have
questions about that, <a href="#support">we&#39;re here to help</a>.</p>
<h3 id='sample-integration'>Sample Integration</h3>
<p>There are just a few things to consider when planning for an integration with
the Cheddar API.  We&#39;ve created a KB Article on the subject based on our
own PHP wrapper. <a href="http://support.getcheddar.com/kb/api-8/sample-integration-roadmap">Check it out</a>.</p>
<h1 id='open-source-wrappers'>Open Source Wrappers</h1>
<p>The Cheddar API can be leveraged by any programming language. All publicly
available code libraries will be made available as they are created. Discussion
of these code libraries is welcomed in the Cheddar API Discussion Forum.
Please visit <a href="http://support.getcheddar.com/">the support forum</a>
for more information.</p>
<h2 id='ruby'>Ruby</h2>
<p>The officially supported gem from Michael at <a href="http://www.expectedbehavior.com/">ExpectedBehavior</a>.
The ExpectedBehavior gem fully implements the API and includes 100% test coverage.
<a href="http://www.rubydoc.info/gems/cheddargetter_client_ruby">Check out the docs</a>.</p>

<ul>
<li><a href="https://github.com/expectedbehavior/cheddargetter_client_ruby">https://github.com/expectedbehavior/cheddargetter_client_ruby</a></li>
</ul>
<h2 id='php'>PHP</h2>
<p>The PHP Cheddar Client is a wrapper for the Cheddar API provided and
supported by the Cheddar team.  There&#39;s a nice
<a href="http://support.getcheddar.com/kb/api-8/php-client-library-quick-start">Quick Start Guide</a>.
This ZF-compatible library is provided as an open source repository via GitHub
here:</p>

<ul>
<li><a href="http://github.com/marcguyer/cheddargetter-client-php">http://github.com/marcguyer/cheddar-client-php</a></li>
</ul>
<h2 id='python'>Python</h2>
<p><a href="https://www.smartfile.com/">Smartfile</a> has taken over maintenance of Sharpy. Thanks,  <a href="http://twitter.com/theSeanOC">@theSeanOC</a> for the original lib!</p>

<ul>
<li><a href="https://github.com/smartfile/sharpy">https://github.com/smartfile/sharpy</a></li>
</ul>
<h2 id='node-js'>Node.js</h2>
<p><a href="http://www.jamiter.com/">Michiel ter Reehorst</a> has taken over maintenance of the Node.js lib, and published it on npm. Follow <a href="https://twitter.com/_jamiter">@_jamiter</a>. Thanks, <a href="https://twitter.com/respectTheCode">@respectTheCode</a> for the original lib!</p>

<ul>
<li><a href="https://github.com/jamiter/node-cheddar-api">https://github.com/jamiter/node-cheddar-api</a></li>
<li><a href="https://www.npmjs.com/package/cheddar">https://www.npmjs.com/package/cheddar</a></li>
</ul>
<h2 id='java'>Java</h2>
<p>David of <a href="http://rusticisoftware.com">Rustici Software</a> has posted his Java
offering on GitHub.</p>

<ul>
<li><a href="https://github.com/RusticiSoftware/CheddarClient">https://github.com/RusticiSoftware/CheddarClient</a></li>
</ul>
<h2 id='c-35'>C&#35;</h2>
<p>Johnny Arguelles of CollabCoders made his extension of <a href="https://github.com/nofxsnap">John Siladie</a>’s
wrapper available on <a href="https://www.nuget.org/packages/CheddarGetter.CollabCoders">NuGet</a>.</p>

<ul>
<li><a href="https://github.com/collabcoders/CheddarGetter">https://github.com/collabcoders/CheddarGetter</a></li>
</ul>

<p>Take a look at <a href="http://www.shorepound.net/">Nathan Arnolds</a>&#39;s fork of
<a href="https://github.com/nofxsnap">John Siladie</a>&#39;s initial release.</p>

<ul>
<li><a href="https://github.com/shorepound/CheddarGetter">https://github.com/shorepound/CheddarGetter</a></li>
</ul>
<h2 id='coldfusion'>ColdFusion</h2>
<p><a href="http://www.scottsdalewebsitedesign.com/">Will</a> has posted his ColdFusion offering at RIAForge.</p>

<ul>
<li><a href="http://cfcheddargetter.riaforge.org/">http://cfcheddargetter.riaforge.org/</a></li>
</ul>
<h1 id='support'>Support</h1>
<p>If you have questions about using the Cheddar API, the following support
resources are available:</p>
<h2 id='api-knowledge-base'>API Knowledge Base</h2>
<p>Visit the official <a href="http://support.getcheddar.com/kb/api-8">Cheddar API Knowledge Base</a>.
Most answers are found within this API documentation or within the Cheddar
API Knowledge Base.</p>
<h2 id='general-knowledge-base'>General Knowledge Base</h2>
<p>We publish all known issues in our Knowledge Base because developers leveraging
the Cheddar API best exercise the code and identify potential errors.
If you have a problem, please search the <a href="http://support.getcheddar.com/kb">Knowledge Base</a>
to see if we are already aware of the issue. If you verify an issue report does
not exist, please describe your issue in a new post with as much detail as possible.</p>
<h2 id='public-and-private-discussion'>Public and Private Discussion</h2>
<p>If you need help not found in the Knowledge Base, start a
<a href="http://support.getcheddar.com/discussion/new">new public discussion</a>.
If your question contains sensitive information, feel free to mark the discussion
as <em>private</em>.</p>
<h1 id='request-response-format'>Request/Response Format</h1><h2 id='authentication'>Authentication</h2>
<p>Authentication is achieved via HTTP Basic Authentication.</p>

<ul>
<li><code>username</code>: Email address of an authorized user of Cheddar</li>
<li><code>password</code>: Password for the authorized user</li>
</ul>

<p>It is recommended that you use a different user account for development accounts vs. live accounts.  It&#39;s also a good idea to use a dedicated user account just for API authentication.</p>
<h2 id='request'>Request</h2>
<p>The standard URL format is:
<code>https://getcheddar.com/xml/&lt;PATH&gt;/productCode/&lt;MY_PRODUCT_CODE&gt;[/PARAMS]</code></p>

<p>For example:</p>

<p><code>https://getcheddar.com/xml/customers/get/productCode/MY_PRODUCT_CODE</code></p>

<p>gets all customer data for the product with <code>productCode=MY_PRODUCT_CODE</code></p>

<p>and</p>

<p><code>https://getcheddar.com/xml/customers/get/code/MY_FIRST_CUSTOMER/productCode/MY_PRODUCT_CODE</code></p>

<p>gets customer data for the customer with <code>code=MY_FIRST_CUSTOMER</code> in the product
with <code>code=MY_PRODUCT_CODE</code></p>
<h2 id='response'>Response</h2>
<p>Response format is XML.  There are three response document types: <em>Plans</em>,
<em>Customers</em>, and <em>Error</em>.  The <em>Plans</em> document is returned when interacting
with pricing plans (a simple <code>GET</code>, for example).  The <em>Customers</em> document is
returned when interacting with customers.</p>

<p>You may also view raw API responses within the GUI.  For example, if you&#39;re looking at your customer list:</p>

<p><code>https://getcheddar.com/admin/customers/get</code></p>

<p>Simply change <code>/admin/</code> to <code>/xml/</code>:</p>

<p><code>https://getcheddar.com/xml/customers/get</code></p>
<h3 id='plans-response-example'>Plans Response Example</h3>
<script src="https://gist.github.com/marcguyer/660077.js?file=plans.xml"></script>
<h3 id='customers-response-example'>Customers Response Example</h3>
<script src="https://gist.github.com/marcguyer/660077.js?file=customers.xml"></script>
<h3 id='error-response-example'>Error Response Example</h3>
<script src="https://gist.github.com/marcguyer/660077.js?file=error.xml"></script>
<h1 id='request-dictionary'>Request Dictionary</h1>
<p>All API request types and parameters are logically named and should be easily
understandable. The following outlines each possible API call and required
parameters.</p>
<h2 id='pricing-plans'>Pricing Plans</h2><h3 id='get-all-pricing-plans'>Get All Pricing Plans</h3>
<p>Get all pricing plan data from the product with <code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/plans/get/productCode/MY_PRODUCT_CODE</code></p>
<h3 id='get-a-single-pricing-plan'>Get a Single Pricing Plan</h3>
<p>Get the pricing plan data from the product with <code>productCode=MY_PRODUCT_CODE</code>
for the pricing plan with <code>code=MY_PLAN_CODE</code></p>

<p><code>/plans/get/productCode/MY_PRODUCT_CODE/code/MY_PLAN_CODE</code></p>
<h2 id='customers'>Customers</h2><h3 id='get-all-customers'>Get All Customers</h3>
<p>Get all customer data from the product with <code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/customers/get/productCode/MY_PRODUCT_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>subscriptionStatus</code></td>
<td>&quot;activeOnly&quot; or &quot;canceledOnly&quot;</td>
</tr>
<tr>
<td><code>planCode[]</code></td>
<td>Your pricing plan code. This is an array and may be provided multiple times to filter by multiple plans.</td>
</tr>
<tr>
<td><code>createdAfterDate</code></td>
<td>YYYY-MM-DD</td>
</tr>
<tr>
<td><code>createdBeforeDate</code></td>
<td>YYYY-MM-DD</td>
</tr>
<tr>
<td><code>canceledAfterDate</code></td>
<td>YYYY-MM-DD</td>
</tr>
<tr>
<td><code>canceledBeforeDate</code></td>
<td>YYYY-MM-DD</td>
</tr>
<tr>
<td><code>transactedAfterDate</code></td>
<td>YYYY-MM-DD</td>
</tr>
<tr>
<td><code>transactedBeforeDate</code></td>
<td>YYYY-MM-DD</td>
</tr>
<tr>
<td><code>orderBy</code></td>
<td>&quot;name&quot; (default), &quot;company&quot;, &quot;plan&quot;, &quot;billingDatetime&quot; or &quot;createdDatetime&quot;</td>
</tr>
<tr>
<td><code>orderByDirection</code></td>
<td>&quot;asc&quot; (default) or &quot;desc&quot;</td>
</tr>
<tr>
<td><code>search</code></td>
<td>Text search customer name, company, email address and last four digits of credit card.</td>
</tr>
</tbody></table>

<aside class="notice">
As in all date and time related operations, the timezone used is the timezone set
for the authenticated user. Dates are inclusive. e.g. assuming timezone for the
authenticated user is set to UTC, 2010-07-04 <= X <= 2010-08-04 is interpreted
as 2010-07-04T00:00:00+00:00 <= X <= 2010-08-04T23:59:59+00:00.
</aside>
<h3 id='get-a-single-customer'>Get a Single Customer</h3>
<blockquote>
<p>Get a Single Customer</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -u <span class="s2">"&lt;username&gt;:&lt;API key&gt;"</span> <span class="se">\</span>
https://getcheddar.com/xml/customers/get/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE
</code></pre><pre class="highlight php tab-php"><code>$customer = $client-&gt;getCustomer('MY_CUSTOMER_CODE');

// get current subscription
$subscription = $customer-&gt;getCustomerSubscription();

// is this customer's account active?
$customerIsActive = $customer-&gt;getCustomerIsActive();

// get the customer's current subscribed pricing plan
$plan = $customer-&gt;getCustomerPlan();

// get the customer's current/pending invoice
$invoice = $customer-&gt;getCustomerInvoice();

// See Cheddar_Response for more convenience methods
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">get_customer</span><span class="p">(</span><span class="ss">:code</span> <span class="o">=&gt;</span> <span class="s1">'MY_CUSTOMER_CODE'</span><span class="p">)</span>
</code></pre>
<p>Get the customer data from the product with <code>productCode=MY_PRODUCT_CODE</code>
for the customer with <code>code=MY_CUSTOMER_CODE</code> (or by id or <code>invoiceNumber</code>).</p>

<p><code>/customers/get/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE</code></p>

<p><code>/customers/get/productCode/MY_PRODUCT_CODE/invoiceNumber/1</code></p>

<p><code>/customers/get/productCode/MY_PRODUCT_CODE/id/CG_CUSTOMER_ID</code></p>
<h3 id='create-a-new-customer'>Create a New Customer</h3>
<blockquote>
<p>Create a customer with a credit card</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -d <span class="s2">"code=MY_CUSTOMER_CODE&amp;firstName=Example"</span> <span class="se">\</span>
-d <span class="s2">"lastName=Customer&amp;email=example_customer@example.com"</span> <span class="se">\</span>
-d <span class="s2">"subscription[planCode]=FREE"</span> <span class="se">\</span>
-d <span class="s2">"subscription[ccFirstName]=Example"</span> <span class="se">\</span>
-d <span class="s2">"subscription[ccLastName]=Customer"</span> <span class="se">\</span>
-d <span class="s2">"subscription[ccNumber]=4111111111111111"</span> <span class="se">\</span>
-d <span class="s2">"subscription[ccExpiration]=04/2017"</span> <span class="se">\</span>
-u <span class="s2">"&lt;username&gt;:&lt;API key&gt;"</span> <span class="se">\</span>
https://getcheddar.com/xml/customers/new/productCode/MY_PRODUCT_CODE
</code></pre><pre class="highlight php tab-php"><code>$data = array(
    'code'      =&gt; 'MY_CUSTOMER_CODE',
    'firstName' =&gt; 'Example',
    'lastName'  =&gt; 'Customer',
    'email'     =&gt; 'example_customer@example.com',
    'subscription' =&gt; array(
        'planCode'      =&gt; 'FREE',
        'ccFirstName'   =&gt; 'Example',
        'ccLastName'    =&gt; 'Customer',
        'ccNumber'      =&gt; '4111111111111111',
        'ccExpiration'  =&gt; '04/2017',
    )
);
$customer = $client-&gt;newCustomer($data);
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">new_customer</span><span class="p">(</span>
  <span class="ss">:code</span>      <span class="o">=&gt;</span> <span class="s1">'MY_CUSTOMER_CODE'</span><span class="p">,</span>
  <span class="ss">:firstName</span> <span class="o">=&gt;</span> <span class="s1">'Example'</span><span class="p">,</span>
  <span class="ss">:lastName</span>  <span class="o">=&gt;</span> <span class="s1">'Customer'</span><span class="p">,</span>
  <span class="ss">:email</span>     <span class="o">=&gt;</span> <span class="s1">'example_customer@example.com'</span><span class="p">,</span>
  <span class="ss">:subscription</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="ss">:planCode</span>     <span class="o">=&gt;</span> <span class="s1">'FREE'</span><span class="p">,</span>
    <span class="ss">:ccFirstName</span>  <span class="o">=&gt;</span> <span class="s1">'Example'</span><span class="p">,</span>
    <span class="ss">:ccLastName</span>   <span class="o">=&gt;</span> <span class="s1">'Customer'</span><span class="p">,</span>
    <span class="ss">:ccNumber</span>     <span class="o">=&gt;</span> <span class="s1">'4111111111111111'</span><span class="p">,</span>
    <span class="ss">:ccExpiration</span> <span class="o">=&gt;</span> <span class="s1">'04/2017'</span>
  <span class="p">}</span>
<span class="p">)</span>
</code></pre>
<blockquote>
<p>Create a customer without payment</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -d <span class="s2">"code=MY_CUSTOMER_CODE&amp;firstName=Example"</span> <span class="se">\</span>
-d <span class="s2">"lastName=Customer&amp;email=example_customer@example.com"</span> <span class="se">\</span>
-d <span class="s2">"subscription[planCode]=FREE"</span> <span class="se">\</span>
-u <span class="s2">"&lt;username&gt;:&lt;API key&gt;"</span> <span class="se">\</span>
https://getcheddar.com/xml/customers/new/productCode/MY_PRODUCT_CODE
</code></pre><pre class="highlight php tab-php"><code>$data = array(
    'code'      =&gt; 'MY_CUSTOMER_CODE',
    'firstName' =&gt; 'Example',
    'lastName'  =&gt; 'Customer',
    'email'     =&gt; 'example_customer@example.com',
    'subscription' =&gt; array(
        'planCode'      =&gt; 'FREE'
    )
);
$customer = $client-&gt;newCustomer($data);
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">new_customer</span><span class="p">(</span>
  <span class="ss">:code</span>      <span class="o">=&gt;</span> <span class="s1">'MY_CUSTOMER_CODE'</span><span class="p">,</span>
  <span class="ss">:firstName</span> <span class="o">=&gt;</span> <span class="s1">'Example'</span><span class="p">,</span>
  <span class="ss">:lastName</span>  <span class="o">=&gt;</span> <span class="s1">'Customer'</span><span class="p">,</span>
  <span class="ss">:email</span>     <span class="o">=&gt;</span> <span class="s1">'example_customer@example.com'</span><span class="p">,</span>
  <span class="ss">:subscription</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="ss">:planCode</span>     <span class="o">=&gt;</span> <span class="s1">'FREE'</span>
  <span class="p">}</span>
<span class="p">)</span>
</code></pre>
<p>Create a new customer in the product with  <code>productCode=MY_PRODUCT_CODE</code>
and subscribe the customer to a pricing plan.</p>

<p><code>/customers/new/productCode/MY_PRODUCT_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>code</code></td>
<td><strong>Required</strong> Your code for this customer. Limited to 255 characters.</td>
</tr>
<tr>
<td><code>gatewayToken</code></td>
<td><strong>Conditional</strong> The gateway reference code. Limited to 255 characters.</td>
</tr>
<tr>
<td><code>firstName</code></td>
<td><strong>Required</strong> Limited to 40 characters</td>
</tr>
<tr>
<td><code>lastName</code></td>
<td><strong>Required</strong> Limited to 40 characters</td>
</tr>
<tr>
<td><code>email</code></td>
<td><strong>Required</strong> Valid email address</td>
</tr>
<tr>
<td><code>company</code></td>
<td>Limited to 60 characters</td>
</tr>
<tr>
<td><code>taxRate</code></td>
<td>The rate for this customer if different than the configured default (e.g, 0.123)</td>
</tr>
<tr>
<td><code>isTaxExempt</code></td>
<td>1 or 0</td>
</tr>
<tr>
<td><code>taxNumber</code></td>
<td>Customer tax number if applicable. Limited to 32 characters</td>
</tr>
<tr>
<td><code>notes</code></td>
<td>Limited to 255 characters</td>
</tr>
<tr>
<td><code>firstContactDatetime</code></td>
<td>Date or datetime in ISO 8601 format.(e.g., 2011-08-01 or 2011-08-01T15:30:00+00:00). See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>referer</code></td>
<td>A valid URL referer. Limited to 255 characters. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>campaignTerm</code></td>
<td>The &quot;term&quot; or &quot;keyword&quot; phrase that lead a potential customer to your site. Google Adwords equivalent: &quot;utm_term&quot;. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>campaignName</code></td>
<td>The name of the marketing campaign. Google Adwords equivalent: &quot;utm_campaign&quot;. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>campaignSource</code></td>
<td>The source of the lead. Google Adwords equivalent: &quot;utm_source&quot;. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>campaignMedium</code></td>
<td>The medium used to find your site. Google Adwords equivalent: &quot;utm_medium&quot;. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>campaignContent</code></td>
<td>The content you wish to track. Google Adwords equivalent: &quot;utm_content&quot;. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>metaData[&lt;user-defined&gt;]</code></td>
<td>See the <a href="http://support.getcheddar.com/kb/api-8/customer-meta-data">KB Article</a> about customer metadata</td>
</tr>
<tr>
<td><code>subscription[planCode]</code></td>
<td><strong>Required</strong> Your code for the subscribed pricing plan</td>
</tr>
<tr>
<td><code>subscription[couponCode]</code></td>
<td>Coupon code for the promotion you&#39;d like to apply to the subscription</td>
</tr>
<tr>
<td><code>subscription[initialBillDate]</code></td>
<td>Date or datetime in ISO 8601 format. (e.g., 2011-08-01 or 2011-08-01T15:30:00+00:00). Date on which you would like the customers first invoice to be billable. This option overrides the pricing plan default. Must either be today&#39;s date (run invoice immediately) or a future date.</td>
</tr>
<tr>
<td><code>subscription[method]</code></td>
<td>&quot;cc&quot; (default) or &quot;paypal&quot;</td>
</tr>
<tr>
<td><code>subscription[ccNumber]</code></td>
<td><strong>Conditional (See Notes)</strong> Numbers only -- a valid credit/debit card number</td>
</tr>
<tr>
<td><code>subscription[ccExpiration]</code></td>
<td><strong>Conditional (See Notes)</strong> MM/YYYY - the expiration date for the credit card</td>
</tr>
<tr>
<td><code>subscription[ccCardCode]</code></td>
<td><strong>Conditional. If plan is free, not required. If your preference is to require the <code>cardCode</code>, required. Not required when method is paypal.</strong> 3-4 digits - The Card Verification Value (CCV).</td>
</tr>
<tr>
<td><code>subscription[gatewayToken]</code></td>
<td><strong>Conditional (See Notes)</strong> The gateway reference code for the payment method. Provide this in lieu of <code>ccNumber</code> when pre-tokenized payment methods are available.</td>
</tr>
<tr>
<td><code>subscription[ccType]</code></td>
<td><strong>Conditional</strong> visa, mc, disc, amex, diners, jcb, unk. If you specify a <code>subscription[gatewayToken]</code>, this is required.</td>
</tr>
<tr>
<td><code>subscription[ccLastFour]</code></td>
<td><strong>Conditional</strong> Numbers only -- last four digits of credit/debit card number. If you specify a <code>subscription[gatewayToken]</code>, this is required.</td>
</tr>
<tr>
<td><code>subscription[ccFirstName]</code></td>
<td><strong>Conditional (See Notes)</strong> Limited to 40 characters</td>
</tr>
<tr>
<td><code>subscription[ccLastName]</code></td>
<td><strong>Conditional (See Notes)</strong> Limited to 40 characters</td>
</tr>
<tr>
<td><code>subscription[ccCompany]</code></td>
<td>Limited to 60 characters</td>
</tr>
<tr>
<td><code>subscription[ccCountry]</code></td>
<td>Limited to 60 characters. Many payment processors require that the ISO 2 char codes are used.</td>
</tr>
<tr>
<td><code>subscription[ccAddress]</code></td>
<td>Limited to 60 characters</td>
</tr>
<tr>
<td><code>subscription[ccCity]</code></td>
<td>Limited to 40 characters</td>
</tr>
<tr>
<td><code>subscription[ccState]</code></td>
<td>Limited to 40 characters. 2 character state/province codes are suggested when country is US/Canada.</td>
</tr>
<tr>
<td><code>subscription[ccZip]</code></td>
<td>Limited to 20 characters</td>
</tr>
<tr>
<td><code>subscription[returnUrl]</code></td>
<td><strong>Conditional. Required when method is PayPal.</strong> Must be a valid URL. Only used when method is paypal. This is the location where subscriber is returned from paypal after accepting a preapproval.</td>
</tr>
<tr>
<td><code>subscription[cancelUrl]</code></td>
<td><strong>Conditional. Required when method is PayPal.</strong> Must be a valid URL. Only used when method is paypal. This is the location where subscriber is returned from paypal after declining a preapproval.</td>
</tr>
<tr>
<td><code>charges[&lt;user-defined&gt;][chargeCode]</code></td>
<td><strong>Not Required (See Notes)</strong> Your code for this charge. Limited to 36 characters.</td>
</tr>
<tr>
<td><code>charges[&lt;user-defined&gt;][quantity]</code></td>
<td><strong>Not Required (See Notes)</strong> Positive integer quantity</td>
</tr>
<tr>
<td><code>charges[&lt;user-defined&gt;][eachAmount]</code></td>
<td><strong>Not Required (See Notes)</strong> Positive or negative integer or float with two digit decimal precision. A positive number will create a charge (debit). A negative number will create a credit.</td>
</tr>
<tr>
<td><code>charges[&lt;user-defined&gt;][description]</code></td>
<td>Description for this charge/credit</td>
</tr>
<tr>
<td><code>items[&lt;user-defined&gt;][itemCode]</code></td>
<td><strong>Not Required (See Notes)</strong> Your code for this tracked item. Limited to 36 characters.</td>
</tr>
<tr>
<td><code>items[&lt;user-defined&gt;][quantity]</code></td>
<td><strong>Not Required (See Notes)</strong> The positive amount accurate to up to 4 decimal places that you wish to set the current usage to for this item. Can be zero.</td>
</tr>
<tr>
<td><code>remoteAddress</code></td>
<td><strong>Not Required (<a href="#fraud-protection-rate-limiting">See Below</a>)</strong> Client IPv4 address</td>
</tr>
</tbody></table>

<aside class="notice">

  If the plan is free, only <code>code</code>, <code>firstName</code>, <code>lastName</code>, <code>email</code> and
  <code>subscription[planCode]</code> are required. If the plan is a paid plan, credit card
  information is only required if you have configured Cheddar to require it.
  It can be optional only if the first invoice on a pricing plan is delayed. If a
  subscription on a paid plan does not have a payment method when it comes time to
  bill, the subscription will be auto-cancelled. See the the email templates
  <a href="http://support.getcheddar.com/kb/operational-how-tos/email-notification-templates">KB Article</a>
  regarding free trials and the <em>Bill Reminder</em> email.
  <br/>
  <br/>

<p>
  When using $0.00 verification transactions (e.g., <code>Authorize.Net CIM validationMode=liveMode)</code>
  for credit card pre-verifications, <code>subscription[ccAddress]</code> and
  <code>subscription[ccZip]</code> are required.
</p>

<p>
    If pre-tokenized payment methods are available, you may create a new
    customer with a payment method by providing a
    <code>subscription[gatewayToken]</code>,
    <code>subscription[ccType]</code>,
    and <code>subscription[ccLastFour]</code>
    values instead of
    <code>subscription[ccNumber]</code>
    and <code>subscription[ccCardCode]</code>.
    This feature is compatible with only some back-end payment processors.
    In some cases, only the <code>subscription[gatewayToken]</code> is
    required as the additional data is subsequently requested from the
    upstream gateway. In that case, params passed in the request will
    override/update the the upstream gateway.
</p>

<p>
  Charges are not required but when including charges, <code>chargeCode</code>,
   <code>quantity</code> and <code>eachAmount</code> are required for each charge.
</p>

<p>
  Items are not required but when including items, <code>itemCode</code> and
  <code>quantity</code> are required for each item.
</p>

<p>
  Check out this article for more information about <a href="http://support.getcheddar.com/kb/api-8/using-paypal-with-the-api">
  using the API with PayPal
  </a>.
</p>

</aside>
<h3 id='import-customers'>Import Customers</h3>
<p>Import customers to the product with <code>productCode=MY_PRODUCT_CODE</code>. Existing
paying (or non-paying) customers in another billing system may be imported while
maintaining payment methods if the payment processor is compatible. Please <a href="http://support.getcheddar.com/discussion/new">contact
support</a> for more information
about whether or not importing is possible in your situation.</p>

<p><code>/customers/import/productCode/MY_PRODUCT_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>code</code></td>
<td><strong>Required</strong> Your code for this customer. Limited to 255 characters.</td>
</tr>
<tr>
<td><code>gatewayToken</code></td>
<td><strong>Conditional</strong> The gateway reference code. Limited to 255 characters.</td>
</tr>
<tr>
<td><code>firstName</code></td>
<td><strong>Required</strong> Limited to 40 characters</td>
</tr>
<tr>
<td><code>lastName</code></td>
<td><strong>Required</strong> Limited to 40 characters</td>
</tr>
<tr>
<td><code>email</code></td>
<td><strong>Required</strong> Valid email address</td>
</tr>
<tr>
<td><code>company</code></td>
<td>Limited to 60 characters</td>
</tr>
<tr>
<td><code>taxRate</code></td>
<td>The rate for this customer if different than the configured default (e.g, 0.123)</td>
</tr>
<tr>
<td><code>isTaxExempt</code></td>
<td>1 or 0</td>
</tr>
<tr>
<td><code>taxNumber</code></td>
<td>Customer tax number if applicable. Limited to 32 characters</td>
</tr>
<tr>
<td><code>notes</code></td>
<td>Limited to 255 characters</td>
</tr>
<tr>
<td><code>firstContactDatetime</code></td>
<td>Date or datetime in ISO 8601 format. (e.g., 2011-08-01 or 2011-08-01T15:30:00+00:00). See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>referer</code></td>
<td>A valid URL referer. Limited to 255 characters. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>campaignTerm</code></td>
<td>The &quot;term&quot; or &quot;keyword&quot; phrase that lead a potential customer to your site. Google Adwords equivalent: &quot;utm_term&quot;. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>campaignName</code></td>
<td>The name of the marketing campaign. Google Adwords equivalent: &quot;utm_campaign&quot;. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>campaignSource</code></td>
<td>The source of the lead. Google Adwords equivalent: &quot;utm_source&quot;. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>campaignMedium</code></td>
<td>The medium used to find your site. Google Adwords equivalent: &quot;utm_medium&quot;. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>campaignContent</code></td>
<td>The content you wish to track. Google Adwords equivalent: &quot;utm_content&quot;. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>metaData[&lt;user-defined&gt;]</code></td>
<td>See the <a href="http://support.getcheddar.com/kb/api-8/customer-meta-data">KB Article</a> about customer metadata</td>
</tr>
<tr>
<td><code>subscription[planCode]</code></td>
<td><strong>Required</strong> Your code for the subscribed pricing plan</td>
</tr>
<tr>
<td><code>subscription[initialBillDate]</code></td>
<td>Date or datetime in ISO 8601 format. (e.g., 2011-08-01 or 2011-08-01T15:30:00+00:00). Date on which you would like the customers first invoice to be billable. This option overrides the pricing plan default. Must either be today&#39;s date (run invoice immediately) or a future date. If empty, the initial invoice will not be scheduled and a subsequent subscription edit with <code>changeBillDate</code> param is required to schedule the invoice.</td>
</tr>
<tr>
<td><code>subscription[method]</code></td>
<td><strong>Conditional</strong> Payment method (&#39;cc&#39; or &#39;paypal&#39;). Required if specifying a payment method. If empty, payment method will be ignored.</td>
</tr>
<tr>
<td><code>subscription[gatewayToken]</code></td>
<td><strong>Conditional</strong> The gateway reference code for the payment method. Required if your settings require it and/or if the customer currently has a payment method that you would like to use to continue to bill this customer.</td>
</tr>
<tr>
<td><code>subscription[ccType]</code></td>
<td><strong>Conditional</strong> visa, mc, disc, amex, diners, jcb, unk. If you specify a <code>subscription[gatewayToken]</code> and <code>subscription[method]=cc</code>, this is required.</td>
</tr>
<tr>
<td><code>subscription[ccLastFour]</code></td>
<td><strong>Conditional</strong> Numbers only -- last four digits of credit/debit card number. If you specify a <code>subscription[gatewayToken]</code> and <code>subscription[method]=cc</code>, this is required.</td>
</tr>
<tr>
<td><code>subscription[ccExpiration]</code></td>
<td><strong>Conditional</strong> MM/YYYY - the expiration date for the credit/debit card. If you specify a <code>subscription[gatewayToken]</code> and <code>subscription[method]=cc</code>, this is required.</td>
</tr>
<tr>
<td><code>subscription[ccFirstName]</code></td>
<td><strong>Conditional</strong> Limited to 40 characters. If you specify a <code>subscription[gatewayToken]</code>, this is required.</td>
</tr>
<tr>
<td><code>subscription[ccLastName]</code></td>
<td><strong>Conditional</strong> Limited to 40 characters. If you specify a <code>subscription[gatewayToken]</code>, this is required.</td>
</tr>
<tr>
<td><code>subscription[ccEmail]</code></td>
<td><strong>Conditional</strong> A valid email address. If you specify a subscription[gatewayToken] and  and <code>subscription[method]=paypal</code>, this is required and should be the email address of the PayPal account.</td>
</tr>
<tr>
<td><code>subscription[ccCompany]</code></td>
<td>Limited to 60 characters</td>
</tr>
<tr>
<td><code>subscription[ccCountry]</code></td>
<td>Limited to 60 characters. Many payment processors require that the ISO 2 char codes are used.</td>
</tr>
<tr>
<td><code>subscription[ccAddress]</code></td>
<td>Limited to 60 characters</td>
</tr>
<tr>
<td><code>subscription[ccCity]</code></td>
<td>Limited to 40 characters</td>
</tr>
<tr>
<td><code>subscription[ccState]</code></td>
<td>Limited to 40 characters. 2 character state/province codes are suggested when country is US/Canada.</td>
</tr>
<tr>
<td><code>subscription[ccZip]</code></td>
<td>Limited to 20 characters</td>
</tr>
<tr>
<td><code>charges[&lt;user-defined&gt;][chargeCode]</code></td>
<td><strong>Not Required (See Notes)</strong> Your code for this charge. Limited to 36 characters.</td>
</tr>
<tr>
<td><code>charges[&lt;user-defined&gt;][quantity]</code></td>
<td><strong>Not Required (See Notes)</strong> Positive integer quantity</td>
</tr>
<tr>
<td><code>charges[&lt;user-defined&gt;][eachAmount]</code></td>
<td><strong>Not Required (See Notes)</strong> Positive or negative integer or float with two digit decimal precision. A positive number will create a charge (debit). A negative number will create a credit.</td>
</tr>
<tr>
<td><code>charges[&lt;user-defined&gt;][description]</code></td>
<td>Description for this charge/credit</td>
</tr>
<tr>
<td><code>items[&lt;user-defined&gt;][itemCode]</code></td>
<td><strong>Not Required (See Notes)</strong> Your code for this tracked item. Limited to 36 characters.</td>
</tr>
<tr>
<td><code>items[&lt;user-defined&gt;][quantity]</code></td>
<td><strong>Not Required (See Notes)</strong> The positive amount accurate to up to 4 decimal places that you wish to set the current usage to for this item. Can be zero.</td>
</tr>
</tbody></table>

<aside class="notice">

  Only direct credit card payment processors are compatible with this import
  when importing customers with a payment method. Future implementations may
  include support for additional payment processor types.
<br/>
<br/>
<p>
    Gateway token values are not validated against the upstream gateway. In
    other words, request data is validated for format only and not for accuracy
    or existence of the corresponding payment method reference at the upstream
    payment processor.
</p>
<p>
    Up to 100 customers may be imported in one call. Customer data must be in a
    nested list.
</p>
<p>
  Any customer may be imported with or without a payment method. If payment
  method import is desired, the last four digits of the card number, the
  expiration date and the card type are required (card type may be "unk" if
  not known).
</p>

<p>
  <code>subscription[initialBillDate]</code> is not required. If specified,
  the first transaction will occur on the <code>initialBillDate</code>. If
  empty, the intitial invoice will not be scheduled and a subsequent
  subscription edit (with `changeBillDate`) is required to schedule the
  initial invoice.
</p>

<p>
  Charges are not required but when including charges, <code>chargeCode</code>,
  <code>quantity</code> and <code>eachAmount</code> are required for each charge.
</p>

<p>
  Items are not required but when including items, <code>itemCode</code> and
  <code>quantity</code> are required for each item.
</p>

<p>
  Check out this article for more information about <a href="http://support.getcheddar.com/kb/getting-started-19/customer-data-migration-and-import">
  using the import functionality
  </a>.
</p>

</aside>
<h3 id='delete-a-customer'>Delete a Customer</h3>
<p>Delete an existing customer in the product with <code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/customers/delete/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE</code></p>

<aside class="warning">
  Warning - This will delete the customer and all related data in Cheddar
  and will delete the customer data at the gateway if a gateway is configured.
</aside>
<h3 id='delete-all-customers'>Delete All Customers</h3>
<p>Delete all existing customers in the product with <code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/customers/delete-all/confirm/[current unix timestamp]/productCode/MY_PRODUCT_CODE</code></p>

<aside class="warning">
  Warning - This will delete all customers and all related data in
  Cheddar. This method is <b>disabled</b> in production accounts.
</aside>
<h3 id='update-a-customer-and-subscription'>Update a Customer and Subscription</h3>
<blockquote>
<p>Update a Customer and Subscription</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -d <span class="s2">"firstName=New&amp;lastName=Info&amp;email=new_info@example.com"</span> <span class="se">\</span>
-d <span class="s2">"subscription[planCode]=NEW_PLAN_CODE"</span> <span class="se">\</span>
-u <span class="s2">"&lt;username&gt;:&lt;API key&gt;"</span> <span class="se">\</span>
https://getcheddar.com/xml/customers/edit/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE
</code></pre><pre class="highlight php tab-php"><code>$data = array(
    'firstName' =&gt; 'New',
    'lastName'  =&gt; 'Info',
    'email'     =&gt; 'new_info@example.com',
    'subscription' =&gt; array(
        'planCode' =&gt; 'NEW_PLAN_CODE'
    )
);
$customer = $client-&gt;editCustomer('MY_CUSTOMER_CODE', null, $data);
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">edit_customer</span><span class="p">(</span>
  <span class="p">{</span><span class="ss">:code</span>      <span class="o">=&gt;</span> <span class="s1">'MY_CUSTOMER_CODE'</span><span class="p">},</span>
  <span class="p">{</span>
    <span class="ss">:firstName</span> <span class="o">=&gt;</span> <span class="s1">'New'</span><span class="p">,</span>
    <span class="ss">:lastName</span>  <span class="o">=&gt;</span> <span class="s1">'Info'</span><span class="p">,</span>
    <span class="ss">:email</span>     <span class="o">=&gt;</span> <span class="s1">'new_info@example.com'</span><span class="p">,</span>
    <span class="ss">:subscription</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="ss">:planCode</span>     <span class="o">=&gt;</span> <span class="s1">'NEW_PLAN_CODE'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">)</span>
</code></pre>
<blockquote>
<p>Change Next Bill Date</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -d <span class="s2">"changeBillDate=2015-12-09"</span> <span class="se">\</span>
-u <span class="s2">"&lt;username&gt;:&lt;API key&gt;"</span> <span class="se">\</span>
https://getcheddar.com/xml/customers/edit-subscription/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE
</code></pre><pre class="highlight php tab-php"><code>$data = array('changeBillDate' =&gt; '2015-12-09T09:36:37-05:00');
$customer = $client-&gt;editSubscription('MY_CUSTOMER_CODE', null, $data);
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">edit_subscription</span><span class="p">(</span>
  <span class="p">{</span><span class="ss">:code</span>      <span class="o">=&gt;</span> <span class="s1">'MY_CUSTOMER_CODE'</span><span class="p">},</span>
  <span class="p">{</span><span class="ss">:changeBillDate</span>     <span class="o">=&gt;</span> <span class="s1">'2015-12-09T09:36:37-05:00'</span><span class="p">}</span>
<span class="p">)</span>
</code></pre>
<p>Update an existing customer&#39;s information in the product with
<code>productCode=MY_PRODUCT_CODE</code> and modify the subscription information</p>

<p><code>/customers/edit/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>gatewayToken</code></td>
<td>The gateway reference code. Limited to 255 characters.</td>
</tr>
<tr>
<td><code>firstName</code></td>
<td>Limited to 20 characters.</td>
</tr>
<tr>
<td><code>lastName</code></td>
<td>Limited to 20 characters.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>Valid email address</td>
</tr>
<tr>
<td><code>company</code></td>
<td>Limited to 60 characters</td>
</tr>
<tr>
<td><code>notes</code></td>
<td>Limited to 255 characters</td>
</tr>
<tr>
<td><code>taxRate</code></td>
<td>The rate for this customer if different than the configured default (e.g, 0.123)</td>
</tr>
<tr>
<td><code>isTaxExempt</code></td>
<td>1 or 0</td>
</tr>
<tr>
<td><code>taxNumber</code></td>
<td>Customer tax number if applicable. Limited to 32 characters</td>
</tr>
<tr>
<td><code>firstContactDatetime</code></td>
<td>Date or datetime in ISO 8601 format. (e.g., 2011-08-01 or 2011-08-01T15:30:00+00:00). See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>referer</code></td>
<td>A valid URL referer. Limited to 255 characters. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>campaignTerm</code></td>
<td>The &quot;term&quot; or &quot;keyword&quot; phrase that lead a potential customer to your site. Google Adwords equivalent: &quot;utm_term&quot;. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>campaignName</code></td>
<td>The name of the marketing campaign. Google Adwords equivalent: &quot;utm_campaign&quot;. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>campaignSource</code></td>
<td>The source of the lead. Google Adwords equivalent: &quot;utm_source&quot;. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>campaignMedium</code></td>
<td>The medium used to find your site. Google Adwords equivalent: &quot;utm_medium&quot;. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>campaignContent</code></td>
<td>The content you wish to track. Google Adwords equivalent: &quot;utm_content&quot;. See the <a href="http://support.getcheddar.com/kb/marketing-metrics/what-are-marketing-metrics-why-do-i-care-how-do-i-get-setup">KB Article</a></td>
</tr>
<tr>
<td><code>metaData[&lt;user-defined&gt;]</code></td>
<td>See the <a href="http://support.getcheddar.com/kb/api-8/customer-meta-data">KB Article</a> about customer metadata</td>
</tr>
<tr>
<td><code>subscription[method]</code></td>
<td>&quot;cc&quot; (default) or &quot;paypal&quot;</td>
</tr>
<tr>
<td><code>subscription[planCode]</code></td>
<td>Your code for the subscribed pricing plan</td>
</tr>
<tr>
<td><code>subscription[couponCode]</code></td>
<td>Coupon code for the promotion you&#39;d like to apply to the subscription</td>
</tr>
<tr>
<td><code>subscription[ccNumber]</code></td>
<td><strong>Not Required (See Notes)</strong> Numbers only -- a valid credit/debit card number</td>
</tr>
<tr>
<td><code>subscription[ccExpiration]</code></td>
<td><strong>Not Required (See Notes)</strong> MM/YYYY - the expiration date for the credit card</td>
</tr>
<tr>
<td><code>subscription[ccCardCode]</code></td>
<td><strong>Conditional. If plan is free, no. If your preference is to require the cardCode, yes.</strong> 3-4 digits - The Card Verification Value (CCV).</td>
</tr>
<tr>
<td><code>subscription[gatewayToken]</code></td>
<td><strong>Conditional (See Notes)</strong> The gateway reference code for the payment method. Provide this in lieu of <code>ccNumber</code> when pre-tokenized payment methods are available.</td>
</tr>
<tr>
<td><code>subscription[ccType]</code></td>
<td><strong>Conditional</strong> visa, mc, disc, amex, diners, jcb, unk. If you specify a <code>subscription[gatewayToken]</code>, this is required.</td>
</tr>
<tr>
<td><code>subscription[ccLastFour]</code></td>
<td><strong>Conditional</strong> Numbers only -- last four digits of credit/debit card number. If you specify a <code>subscription[gatewayToken]</code>, this is required.</td>
</tr>
<tr>
<td><code>subscription[ccFirstName]</code></td>
<td><strong>Not Required (See Notes)</strong> Limited to 20 characters</td>
</tr>
<tr>
<td><code>subscription[ccLastName]</code></td>
<td><strong>Not Required (See Notes)</strong> Limited to 20 characters</td>
</tr>
<tr>
<td><code>subscription[ccCompany]</code></td>
<td>Limited to 50 characters</td>
</tr>
<tr>
<td><code>subscription[ccCountry]</code></td>
<td>Limited to 60 characters. Many payment processors require that the ISO 2 char codes are used.</td>
</tr>
<tr>
<td><code>subscription[ccAddress]</code></td>
<td>Limited to 60 characters</td>
</tr>
<tr>
<td><code>subscription[ccCity]</code></td>
<td>Limited to 40 characters</td>
</tr>
<tr>
<td><code>subscription[ccState]</code></td>
<td>Suggested when country is US/Canada.</td>
</tr>
<tr>
<td><code>subscription[ccZip]</code></td>
<td>Conditional. If plan is free, no. If your preference is to require the zip, yes.</td>
</tr>
<tr>
<td><code>subscription[returnUrl]</code></td>
<td><strong>Conditional. Required when method is paypal.</strong> Must be a valid URL. Only used when method is paypal. This is the location where subscriber is returned from paypal after accepting a preapproval.</td>
</tr>
<tr>
<td><code>subscription[cancelUrl]</code></td>
<td><strong>Conditional. Required when method is paypal.</strong> Must be a valid URL. Only used when method is paypal. This is the location where subscriber is returned from paypal after declining a preapproval.</td>
</tr>
<tr>
<td><code>subscription[changeBillDate]</code></td>
<td>Date or datetime in ISO 8601 format. (e.g., 2011-08-01 or 2011-08-01T15:30:00+00:00). You may also use the word &#39;now&#39; as shorthand for the current datetime.</td>
</tr>
<tr>
<td><code>remoteAddress</code></td>
<td><strong>Not Required (<a href="#fraud-protection-rate-limiting">See Below</a>)</strong> Client IPv4 address</td>
</tr>
</tbody></table>

<aside class="notice">

  If the customer does not already have a subscription with a valid credit card,
  all credit card information is required. If the plan code corresponds to a
  "free" plan, no Credit Card data is required. If the customer already has a
  subscription with a credit card, no credit card information data is required.
  In this instance, any subset of credit card data may be provided.
<br/>
<br/>
<p>
  If the plan is a paid plan, credit card information is only required if you
  have configured Cheddar to require it. It can be optional only if the
  next invoice is delayed. If a subscription on a paid plan does not have a
  credit card when it comes time to bill, the subscription will be auto-cancelled.
  See the email templates <a href="http://support.getcheddar.com/kb/operational-how-tos/email-notification-templates">KB Article</a> regarding free trials and the <em>Bill Reminder</em> email.
</p>

<p>
    If pre-tokenized payment methods are available, you may create a new
    customer with a payment method by providing a
    <code>subscription[gatewayToken]</code>,
    <code>subscription[ccType]</code>,
    and <code>subscription[ccLastFour]</code>
    values instead of
    <code>subscription[ccNumber]</code>
    and <code>subscription[ccCardCode]</code>.
    This feature is compatible with only some back-end payment processors.
    In some cases, only the <code>subscription[gatewayToken]</code> is
    required as the additional data is subsequently requested from the
    upstream gateway. In that case, params passed in the request will
    override/update the the upstream gateway.
</p>

<p>
  Changing the next bill date using <code>subscription[changeBillDate]</code>
  effects the billing cycle. Subsequent bill dates will be on the new cycle.
  In other words, for a monthly plan that typically bills on the 3rd of every
  month, if the next bill date is changed to the 10th, the subscription will
  now bill every month on the 10th. If the date is equal to 'now' or is less
  than or equal to the current date and time, the current invoice will be
  executed in real-time.
</p>
  <p>
    Check out this article for more information about
    <a href="http://support.getcheddar.com/kb/api-8/using-paypal-with-the-api">
    using the API with PayPal
    </a>.
  </p>

</aside>
<h3 id='update-a-customer-only'>Update a Customer Only</h3>
<blockquote>
<p>Update a Customer</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -d <span class="s2">"firstName=New&amp;lastName=Name"</span> <span class="se">\</span>
-u <span class="s2">"&lt;username&gt;:&lt;API key&gt;"</span> <span class="se">\</span>
https://getcheddar.com/xml/customers/edit/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE
</code></pre><pre class="highlight php tab-php"><code>$data = array(
    'firstName' =&gt; 'New',
    'lastName'  =&gt; 'Info',
    'email'     =&gt; 'new_info@example.com'
);
$customer = $client-&gt;editCustomerOnly('MY_CUSTOMER_CODE', null, $data);
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">edit_customer_only</span><span class="p">(</span>
  <span class="p">{</span><span class="ss">:code</span>       <span class="o">=&gt;</span> <span class="s1">'MY_CUSTOMER_CODE'</span><span class="p">},</span>
  <span class="p">{</span>
    <span class="ss">:firstName</span> <span class="o">=&gt;</span> <span class="s1">'New'</span><span class="p">,</span>
    <span class="ss">:lastName</span>  <span class="o">=&gt;</span> <span class="s1">'Info'</span><span class="p">,</span>
    <span class="ss">:email</span>     <span class="o">=&gt;</span> <span class="s1">'new_info@example.com'</span><span class="p">,</span>
    <span class="ss">:company</span>   <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="ss">:notes</span>     <span class="o">=&gt;</span> <span class="s1">''</span>
  <span class="p">}</span>
<span class="p">)</span>
</code></pre>
<p>Update an existing customer&#39;s information in the product with
<code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/customers/edit-customer/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>firstName</code></td>
<td>Limited to 20 characters.</td>
</tr>
<tr>
<td><code>lastName</code></td>
<td>Limited to 20 characters.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>Valid email address</td>
</tr>
<tr>
<td><code>company</code></td>
<td>Limited to 60 characters</td>
</tr>
<tr>
<td><code>notes</code></td>
<td>Limited to 255 characters</td>
</tr>
<tr>
<td><code>taxRate</code></td>
<td>The rate for this customer if different than the configured default (e.g, 0.123)</td>
</tr>
<tr>
<td><code>isTaxExempt</code></td>
<td>1 or 0</td>
</tr>
<tr>
<td><code>taxNumber</code></td>
<td>Customer tax number if applicable. Limited to 32 characters</td>
</tr>
<tr>
<td><code>firstContactDatetime</code></td>
<td>Date or datetime in ISO 8601 format. (e.g., 2011-08-01 or 2011-08-01T15:30:00+00:00). See the <a href="http://support.cheddargetter.com/faqs/marketing-metrics/marketing-metrics">KB Article</a></td>
</tr>
<tr>
<td><code>referer</code></td>
<td>A valid URL referer. Limited to 255 characters. See the <a href="http://support.cheddargetter.com/faqs/marketing-metrics/marketing-metrics">KB Article</a></td>
</tr>
<tr>
<td><code>campaignTerm</code></td>
<td>The &quot;term&quot; or &quot;keyword&quot; phrase that lead a potential customer to your site. Google Adwords equivalent: &quot;utm_term&quot;. See the <a href="http://support.cheddargetter.com/faqs/marketing-metrics/marketing-metrics">KB Article</a></td>
</tr>
<tr>
<td><code>campaignName</code></td>
<td>The name of the marketing campaign. Google Adwords equivalent: &quot;utm_campaign&quot;. See the <a href="http://support.cheddargetter.com/faqs/marketing-metrics/marketing-metrics">KB Article</a></td>
</tr>
<tr>
<td><code>campaignSource</code></td>
<td>The source of the lead. Google Adwords equivalent: &quot;utm_source&quot;. See the <a href="http://support.cheddargetter.com/faqs/marketing-metrics/marketing-metrics">KB Article</a></td>
</tr>
<tr>
<td><code>campaignMedium</code></td>
<td>The medium used to find your site. Google Adwords equivalent: &quot;utm_medium&quot;. See the <a href="http://support.cheddargetter.com/faqs/marketing-metrics/marketing-metrics">KB Article</a></td>
</tr>
<tr>
<td><code>campaignContent</code></td>
<td>The content you wish to track. Google Adwords equivalent: &quot;utm_content&quot;. See the <a href="http://support.cheddargetter.com/faqs/marketing-metrics/marketing-metrics">KB Article</a></td>
</tr>
<tr>
<td><code>metaData[&lt;user-defined&gt;]</code></td>
<td>See the <a href="http://support.cheddargetter.com/kb/api-8/customer-meta-data">KB Article</a> about customer metadata</td>
</tr>
<tr>
<td><code>remoteAddress</code></td>
<td><strong>Not Required (<a href="#fraud-protection-rate-limiting">See Below</a>)</strong> Client IPv4 address</td>
</tr>
</tbody></table>
<h2 id='subscriptions'>Subscriptions</h2><h3 id='update-a-subscription-only'>Update a Subscription Only</h3>
<blockquote>
<p>Update a Customer&#39;s Subscription</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -d <span class="s2">"planCode=NEW_PLAN_CODE"</span> <span class="se">\</span>
-u <span class="s2">"&lt;username&gt;:&lt;API key&gt;"</span> <span class="se">\</span>
https://getcheddar.com/xml/customers/edit-subscription/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE
</code></pre><pre class="highlight php tab-php"><code>$data = array('planCode' =&gt; 'NEW_PLAN_CODE');
$customer = $client-&gt;editSubscription('MY_CUSTOMER_CODE', null, $data);
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">edit_subscription</span><span class="p">(</span>
  <span class="p">{</span><span class="ss">:code</span>      <span class="o">=&gt;</span> <span class="s1">'MY_CUSTOMER_CODE'</span><span class="p">},</span>
  <span class="p">{</span><span class="ss">:planCode</span>     <span class="o">=&gt;</span> <span class="s1">'NEW_PLAN_CODE'</span><span class="p">}</span>
<span class="p">)</span>
</code></pre>
<p>Update an existing customer&#39;s subscription information in the product with
<code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/customers/edit-subscription/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>method</code></td>
<td>&quot;cc&quot; (default) or &quot;paypal&quot;</td>
</tr>
<tr>
<td><code>planCode</code></td>
<td>Your code for the subscribed plan</td>
</tr>
<tr>
<td><code>couponCode</code></td>
<td>Coupon code you&#39;d like to apply to the subscription</td>
</tr>
<tr>
<td><code>ccNumber</code></td>
<td><strong>Not Required (See Notes)</strong> Numbers only -- a valid credit/debit card number</td>
</tr>
<tr>
<td><code>ccExpiration</code></td>
<td><strong>Not Required (See Notes)</strong> MM/YYYY - the expiration date for the credit card</td>
</tr>
<tr>
<td><code>ccCardCode</code></td>
<td><strong>Not Required (See Notes)</strong> 3-4 digits - The Card Verification Value (CCV).</td>
</tr>
<tr>
<td><code>gatewayToken</code></td>
<td><strong>Conditional (See Notes)</strong> The gateway reference code for the payment method. Provide this in lieu of <code>ccNumber</code> when pre-tokenized payment methods are available.</td>
</tr>
<tr>
<td><code>ccType</code></td>
<td><strong>Conditional</strong> visa, mc, disc, amex, diners, jcb, unk. If you specify a <code>gatewayToken</code>, this is required.</td>
</tr>
<tr>
<td><code>ccLastFour</code></td>
<td><strong>Conditional</strong> Numbers only -- last four digits of credit/debit card number. If you specify a <code>subscription[gatewayToken]</code>, this is required.</td>
</tr>
<tr>
<td><code>ccFirstName</code></td>
<td><strong>Not Required (See Notes)</strong> Limited to 20 characters</td>
</tr>
<tr>
<td><code>ccLastName</code></td>
<td><strong>Not Required (See Notes)</strong> Limited to 20 characters</td>
</tr>
<tr>
<td><code>ccCompany</code></td>
<td>Limited to 50 characters</td>
</tr>
<tr>
<td><code>ccCountry</code></td>
<td>Limited to 60 characters. Many payment processors require that the ISO 2 char codes are used.</td>
</tr>
<tr>
<td><code>ccAddress</code></td>
<td>Limited to 60 characters</td>
</tr>
<tr>
<td><code>ccCity</code></td>
<td>Limited to 40 characters</td>
</tr>
<tr>
<td><code>ccState</code></td>
<td>Limited to 40 characters. 2 character state/province codes are suggested when country is US/Canada.</td>
</tr>
<tr>
<td><code>ccZip</code></td>
<td><strong>Not Required (See Notes)</strong> Limited to 20 characters</td>
</tr>
<tr>
<td><code>returnUrl</code></td>
<td><strong>Conditional. Required when method is paypal.</strong> Must be a valid URL. Only used when method is paypal. This is the location where subscriber is returned from paypal after accepting a preapproval.</td>
</tr>
<tr>
<td><code>cancelUrl</code></td>
<td><strong>Conditional. Required when method is paypal.</strong> Must be a valid URL. Only used when method is paypal. This is the location where subscriber is returned from paypal after declining a preapproval.</td>
</tr>
<tr>
<td><code>changeBillDate</code></td>
<td>Date or datetime in ISO 8601 format. (e.g., 2011-08-01 or 2011-08-01T15:30:00+00:00). You may also use the word &#39;now&#39; as shorthand for the current datetime.</td>
</tr>
<tr>
<td><code>remoteAddress</code></td>
<td><strong>Not Required (<a href="#fraud-protection-rate-limiting">See Below</a>)</strong> Client IPv4 address</td>
</tr>
</tbody></table>

<aside class="notice">

  If the customer does not already have a subscription with a valid credit card,
  all credit card information is required. If the plan code corresponds to a
  "free" plan, no credit card data is required. If the customer already has a
  subscription with a credit card, no credit card information data is required.
  In this instance, any subset of credit card data may be provided. Your
  preferences still apply for <code>ccCardCode</code> and <code>ccZip</code>.
<br/>
<br/>
<p>
  If the plan is a paid plan, credit card information is only required if you
  have configured Cheddar to require it. It can be optional only if the
  next invoice is delayed. If a subscription on a paid plan does not have a credit
  card when it comes time to bill, the subscription will be auto-cancelled.
  See the email templates <a href="http://support.getcheddar.com/kb/operational-how-tos/email-notification-templates">KB Article</a> regarding free trials and the <em>Bill Reminder</em> email.
</p>

<p>
    If pre-tokenized payment methods are available, you may create a new
    customer with a payment method by providing a
    <code>gatewayToken</code>,
    <code>ccType</code>,
    and <code>ccLastFour</code>
    values instead of
    <code>ccNumber</code>
    and <code>ccCardCode</code>.
    This feature is compatible with only some back-end payment processors.
    In some cases, only the <code>subscription[gatewayToken]</code> is
    required as the additional data is subsequently requested from the
    upstream gateway. In that case, params passed in the request will
    override/update the the upstream gateway.
</p>

<p>
  Changing the next bill date using <code>subscription[changeBillDate]</code>
  effects the billing cycle. Subsequent bill dates will be on the new cycle.
  In other words, for a monthly plan that typically bills on the 3rd of every
  month, if the next bill date is changed to the 10th, the subscription will
  now bill every month on the 10th. If the date is equal to 'now' or is less
  than or equal to the current date and time, the current invoice will be
  executed in real-time.
</p>
  <p>
    Check out this article for more information about
    <a href="http://support.getcheddar.com/kb/api-8/using-paypal-with-the-api">
    using the API with PayPal
    </a>.
  </p>

</aside>
<h3 id='cancel-a-customer-39-s-subscription'>Cancel a Customer&#39;s Subscription</h3>
<p>Cancel an existing customer&#39;s subscription in the product with
<code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/customers/cancel/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE</code></p>

<aside class="notice">
  The customer's current subscription will be canceled at the moment this call
  is made. If you would like to reactivate a customer's subscription, you may do
  so by updating the subscription with full credit card data.
</aside>
<h2 id='tracked-items'>Tracked Items</h2>
<p>Use the tracked item endpoints to <em>set</em>, <em>increment</em>, or <em>decrement</em> the quantity of
and item for an individual subscription.</p>

<p><a href="http://support.getcheddar.com/kb/pricing-plans/pricing-plan-basics#tracked-items">Learn more about using Tracked Items in the Knowledge Base</a></p>

<p><strong>Note:</strong> Updates of item quantities on <em>canceled subscriptions</em> are only possible under a few circumstances:</p>

<ul>
<li>The cancellation is the special <code>paypal-wait</code> state and the PayPal preapproval request period is still valid (up to 3 hours)</li>
<li>The canceled subscription has a pending invoice with a billingDatetime in the future</li>
<li>The quantity update request is for the outstanding invoice. The request includes the <code>invoicePeriod</code> parameter and it is set to <code>outstanding</code></li>
</ul>
<h3 id='add-item-quantity'>Add Item Quantity</h3>
<blockquote>
<p>Add Item Quantity</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -u <span class="s2">"&lt;username&gt;:&lt;API key&gt;"</span> <span class="se">\</span>
https://getcheddar.com/xml/customers/add-item-quantity/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE/itemCode/MY_ITEM_CODE
</code></pre><pre class="highlight php tab-php"><code>$data = array(
    'itemCode' =&gt; 'MY_ITEM_CODE'
);

$quantity = $client-&gt;addItemQuantity('MY_CUSTOMER_CODE', null, $data);
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">add_item_quantity</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="ss">:code</span> <span class="o">=&gt;</span> <span class="s1">'MY_CUSTOMER_CODE'</span><span class="p">,</span>
        <span class="ss">:item_code</span> <span class="o">=&gt;</span> <span class="s1">'MY_ITEM_CODE'</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre>
<p>Increment a customer&#39;s current usage of a single item in the product with
<code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/customers/add-item-quantity/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE/itemCode/MY_ITEM_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>quantity</code></td>
<td>The positive amount accurate to up to 4 decimal places (if other that 1.0000) that you wish to add to the current usage for this item.</td>
</tr>
<tr>
<td><code>remoteAddress</code></td>
<td><strong>Not Required (<a href="#fraud-protection-rate-limiting">See Below</a>)</strong> Client IPv4 address</td>
</tr>
</tbody></table>

<aside class="notice">
  <code>quantity</code> is only required if you wish to add more than one to
  the current usage amount.
</aside>
<h3 id='remove-item-quantity'>Remove Item Quantity</h3>
<blockquote>
<p>Remove Item Quantity</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -u <span class="s2">"&lt;username&gt;:&lt;API key&gt;"</span> <span class="se">\</span>
https://getcheddar.com/xml/customers/remove-item-quantity/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE/itemCode/MY_ITEM_CODE
</code></pre><pre class="highlight php tab-php"><code>$data = array(
    'itemCode' =&gt; 'MY_ITEM_CODE'
);

$quantity = $client-&gt;removeItemQuantity('MY_CUSTOMER_CODE', null, $data);
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">remove_item_quantity</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="ss">:code</span> <span class="o">=&gt;</span> <span class="s1">'MY_CUSTOMER_CODE'</span><span class="p">,</span>
        <span class="ss">:item_code</span> <span class="o">=&gt;</span> <span class="s1">'MY_ITEM_CODE'</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre>
<p>Decrement a customer&#39;s current usage of a single item in the product with
<code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/customers/remove-item-quantity/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE/itemCode/MY_ITEM_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>quantity</code></td>
<td>The positive amount accurate to up to 4 decimal places (if other that 1.0000) that you wish to remove from the customer&#39;s current quantity for this item.</td>
</tr>
<tr>
<td><code>remoteAddress</code></td>
<td><strong>Not Required (<a href="#fraud-protection-rate-limiting">see below</a>)</strong> Client IPv4 address</td>
</tr>
</tbody></table>

<aside class="notice">
  <code>quantity</code> is only required if you wish to subtract more than 1 from
  the current usage amount.
</aside>
<h3 id='set-item-quantity'>Set Item Quantity</h3>
<blockquote>
<p>Set Item Quantity</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -d <span class="s2">"quantity=1.0000"</span> <span class="se">\</span>
-u <span class="s2">"&lt;username&gt;:&lt;API key&gt;"</span> <span class="se">\</span>
https://getcheddar.com/xml/customers/set-item-quantity/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE/itemCode/MY_ITEM_CODE
</code></pre><pre class="highlight php tab-php"><code>$data = array(
    'itemCode' =&gt; 'MY_ITEM_CODE',
    'quantity' =&gt; 1.0000
);

$quantity = $client-&gt;setItemQuantity('MY_CUSTOMER_CODE', null, $data);
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">set_item_quantity</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="ss">:code</span> <span class="o">=&gt;</span> <span class="s1">'MY_CUSTOMER_CODE'</span><span class="p">,</span>
        <span class="ss">:item_code</span> <span class="o">=&gt;</span> <span class="s1">'MY_ITEM_CODE'</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="ss">:charge_code</span> <span class="o">=&gt;</span> <span class="s1">'CHARGE_CODE'</span><span class="p">,</span>
        <span class="ss">:quantity</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="o">.</span><span class="mo">0000</span><span class="p">,</span>
        <span class="ss">:eachAmount</span> <span class="o">=&gt;</span> <span class="s1">'1'</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre>
<p>Set a customer&#39;s current usage of a single item in the product with
<code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/customers/set-item-quantity/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE/itemCode/MY_ITEM_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>quantity</code></td>
<td>Yes</td>
</tr>
<tr>
<td><code>invoicePeriod</code></td>
<td>The billing period - &#39;current&#39; (the default) or &#39;outstanding&#39;. <a href="#current-vs-outstanding-invoice">See below</a>.</td>
</tr>
<tr>
<td><code>remoteAddress</code></td>
<td><strong>Not Required (<a href="#fraud-protection-rate-limiting">see below</a>)</strong> Client IPv4 address</td>
</tr>
</tbody></table>
<h2 id='invoice-interactions'>Invoice Interactions</h2><h3 id='add-a-custom-charge-credit'>Add a Custom Charge/Credit</h3>
<blockquote>
<p>Add a Custom Charge</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -d <span class="s2">"chargeCode=CHARGE_CODE"</span> <span class="se">\</span>
-d <span class="s2">"quantity=3"</span> <span class="se">\</span>
-d <span class="s2">"eachAmount=2.50"</span> <span class="se">\</span>
-u <span class="s2">"&lt;username&gt;:&lt;API key&gt;"</span> <span class="se">\</span>
https://getcheddar.com/xml/customers/add-charge/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE
</code></pre><pre class="highlight php tab-php"><code>$data = array(
    'chargeCode' =&gt; 'CHARGE_CODE',
    'quantity' =&gt; 3,
    'eachAmount' =&gt; 2.50,
    'description' =&gt; 'Example charge'
);
$customer = $client-&gt;addCharge('MY_CUSTOMER_CODE', null, $data);
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">add_charge</span><span class="p">(</span>
    <span class="p">{</span><span class="ss">:code</span> <span class="o">=&gt;</span> <span class="s1">'MY_CUSTOMER_CODE'</span><span class="p">},</span>
    <span class="p">{</span>
        <span class="ss">:chargeCode</span> <span class="o">=&gt;</span> <span class="s1">'CHARGE_CODE'</span><span class="p">,</span>
        <span class="ss">:quantity</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span>
        <span class="ss">:eachAmount</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="o">.</span><span class="mi">50</span><span class="p">,</span>
        <span class="ss">:description</span> <span class="o">=&gt;</span> <span class="s1">'Example charge'</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre>
<blockquote>
<p>Add a Custom Credit</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -d <span class="s2">"chargeCode=CREDIT_CODE"</span> <span class="se">\</span>
-d <span class="s2">"quantity=2"</span> <span class="se">\</span>
-d <span class="s2">"eachAmount=-8.00"</span> <span class="se">\</span>
-u <span class="s2">"&lt;username&gt;:&lt;API key&gt;"</span> <span class="se">\</span>
https://getcheddar.com/xml/customers/add-charge/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE
</code></pre><pre class="highlight php tab-php"><code>$data = array(
    'chargeCode' =&gt; 'CHARGE_CODE',
    'quantity' =&gt; 3,
    'eachAmount' =&gt; 2.50,
    'description' =&gt; 'Example charge'
);
$customer = $client-&gt;addCharge('MY_CUSTOMER_CODE', null, $data);
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">add_charge</span><span class="p">(</span>
    <span class="p">{</span><span class="ss">:code</span> <span class="o">=&gt;</span> <span class="s1">'MY_CUSTOMER_CODE'</span><span class="p">},</span>
    <span class="p">{</span>
        <span class="ss">:chargeCode</span> <span class="o">=&gt;</span> <span class="s1">'CHARGE_CODE'</span><span class="p">,</span>
        <span class="ss">:quantity</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
        <span class="ss">:eachAmount</span> <span class="o">=&gt;</span> <span class="o">-</span><span class="mi">8</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span> <span class="sr">//</span> <span class="n">set</span> <span class="n">negative</span> <span class="n">value</span> <span class="k">for</span> <span class="n">a</span> <span class="n">credit</span>
        <span class="ss">:description</span> <span class="o">=&gt;</span> <span class="s1">'Example credit'</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre>
<p>Add an arbitrary charge or credit to the customer&#39;s current invoice in the product
with <code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/customers/add-charge/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>chargeCode</code></td>
<td><strong>Required</strong> Your code for this charge. Limited to 36 characters.</td>
</tr>
<tr>
<td><code>quantity</code></td>
<td><strong>Required</strong> Positive integer quantity</td>
</tr>
<tr>
<td><code>eachAmount</code></td>
<td><strong>Required</strong> Positive or negative integer or float with two digit decimal precision. A positive number will create a charge (debit). A negative number will create a credit.</td>
</tr>
<tr>
<td><code>description</code></td>
<td>Description for this charge/credit</td>
</tr>
<tr>
<td><code>invoicePeriod</code></td>
<td>The billing period - &#39;current&#39; (the default) or &#39;outstanding&#39;. <a href="#current-vs-outstanding-invoice">See below</a>.</td>
</tr>
<tr>
<td><code>remoteAddress</code></td>
<td><strong>Not Required (<a href="#fraud-protection-rate-limiting">see below</a>)</strong> Client IPv4 address</td>
</tr>
</tbody></table>
<h3 id='delete-a-custom-charge-credit'>Delete a Custom Charge/Credit</h3>
<blockquote>
<p>Delete a Custom Charge/Credit</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -d <span class="s2">"chargeId=CHARGE_ID"</span> <span class="se">\</span>
-u <span class="s2">"&lt;username&gt;:&lt;API key&gt;"</span> <span class="se">\</span>
https://chedddargetter.com/xml/customers/delete-charge/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE
</code></pre><pre class="highlight php tab-php"><code>$data = array(
    'chargeId' =&gt; 'CHARGE_ID'
);
$customer = $client-&gt;deleteCharge('MY_CUSTOMER_CODE', null, $data);
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">delete_charge</span><span class="p">(</span>
    <span class="p">{</span><span class="ss">:code</span> <span class="o">=&gt;</span> <span class="s1">'MY_CUSTOMER_CODE'</span><span class="p">},</span>
    <span class="p">{</span>
        <span class="ss">:chargeId</span> <span class="o">=&gt;</span> <span class="s1">'CHARGE_ID'</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre>
<p>Remove a charge or credit from the customer&#39;s current invoice in the product
with <code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/customers/delete-charge/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>chargeId</code></td>
<td><strong>Required</strong> Cheddar&#39;s ID for the charge/credit</td>
</tr>
<tr>
<td><code>invoicePeriod</code></td>
<td>The billing period - &#39;current&#39; (the default) or &#39;outstanding&#39;. <a href="#current-vs-outstanding-invoice">See below</a>.</td>
</tr>
<tr>
<td><code>remoteAddress</code></td>
<td><strong>Not Required (<a href="#fraud-protection-rate-limiting">see below</a>)</strong> Client IPv4 address</td>
</tr>
</tbody></table>
<h3 id='create-a-one-time-invoice'>Create a One-Time Invoice</h3>
<p>Create a parallel one-time invoice and execute the transaction immediately using
the customer&#39;s current payment method in the product with <code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/invoices/new/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>charges[&lt;user-defined&gt;][chargeCode]</code></td>
<td><strong>Required</strong> Your code for this charge. Limited to 36 characters.</td>
</tr>
<tr>
<td><code>charges[&lt;user-defined&gt;][quantity]</code></td>
<td><strong>Required</strong> Positive integer quantity</td>
</tr>
<tr>
<td><code>charges[&lt;user-defined&gt;][eachAmount]</code></td>
<td><strong>Required</strong> Positive or negative integer or float with two digit decimal precision. A positive number will create a charge (debit). A negative number will create a credit.</td>
</tr>
<tr>
<td><code>charges[&lt;user-defined&gt;][description]</code></td>
<td>Description for this charge/credit</td>
</tr>
<tr>
<td><code>remoteAddress</code></td>
<td><strong>Not Required (<a href="#fraud-protection-rate-limiting">see below</a>)</strong> Client IPv4 address</td>
</tr>
</tbody></table>

<aside class="notice">
  At least one charge is required. Multiple charges may be submitted.
</aside>
<h3 id='run-an-outstanding-invoice'>Run an Outstanding Invoice</h3>
<p>Execute an outstanding invoice in the product with <code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/customers/run-outstanding/productCode/MY_PRODUCT_CODE/code/MY_CUSTOMER_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>ccCardCode</code></td>
<td><strong>Note Required</strong> 3-4 digits - The Card Verification Value (CCV).</td>
</tr>
<tr>
<td><code>remoteAddress</code></td>
<td><strong>Not Required (<a href="#fraud-protection-rate-limiting">see below</a>)</strong> Client IPv4 address</td>
</tr>
</tbody></table>

<aside class="notice">
  The customer must have an outstanding invoice. This method can be useful for
  manually retrying the transaction on an outstanding invoice. An invoice may
  be outstanding if all prior attempts to transact the invoice were unsuccessful
  or if the invoice has not yet been attempted as with the <a href="http://support.getcheddar.com/kb/api-8/web-hooks-service-hooks-and-captain-hooks#subscription-billable">
  Subscription Billable Event
  </a>.
  <br/>
  <br/>
  <p>
    This method can be used to reactivate a canceled subscription. If the retry
    succeeds on a canceled subscription, the subscription is reactivated. You
    can also add credits to the invoice to offset charges, making the invoice
    amount = 0. In this case, executing that outstanding invoice will succeed
    for a zero amount and reactivate the subscription.
  </p>
</aside>
<h3 id='issue-a-refund'>Issue a Refund</h3>
<p>Refund a transaction on a billed invoice in the product with <code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/invoices/refund/productCode/MY_PRODUCT_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>number</code> or <code>id</code></td>
<td><strong>Required</strong> Either Cheddar&#39;s ID for the invoice or the Cheddar-generated invoice number</td>
</tr>
<tr>
<td><code>amount</code></td>
<td><strong>Required</strong> An amount less than or equal to the refundable amount. See notes.</td>
</tr>
<tr>
<td><code>remoteAddress</code></td>
<td><strong>Not Required (<a href="#fraud-protection-rate-limiting">see below</a>)</strong> Client IPv4 address</td>
</tr>
</tbody></table>

<aside class="notice">
  Many payment processors allow for partial refunds. If your payment processor
  allows partial refunds, the amount may be less than the amount of the original
  transaction. If the transaction had been previously refunded and you wish to
  issue another refund, the amount must be less than or equal to the original
  amount minus any previously issued partial refund amounts.
  <br/>
  <br/>
  <p>
    Some payment processors allow for refunds prior to transaction settlement.
    If your payment processor does not allow refunds prior to settlement, you
    must execute a void of the full transaction or wait until after settlement
    occurs to issue a refund.
  </p>
</aside>
<h3 id='issue-a-void'>Issue a Void</h3>
<p>Void a transaction on a billed invoice in the product with <code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/invoices/void/productCode/MY_PRODUCT_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>number</code> or <code>id</code></td>
<td><strong>Required</strong> Either Cheddar&#39;s ID for the invoice or the Cheddar-generated invoice number</td>
</tr>
<tr>
<td><code>remoteAddress</code></td>
<td><strong>Not Required (<a href="#fraud-protection-rate-limiting">see below</a>)</strong> lient IPv4 address</td>
</tr>
</tbody></table>

<aside class="notice">
  Some payment processors allow for voids. If your payment processor allows
  voids, a void can only be executed prior to transaction settlement.
</aside>
<h3 id='issue-a-void-or-refund'>Issue a Void or Refund</h3>
<p>Defer to Cheddar to decide if a void or a refund is executed against
the invoice in the product with  <code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/invoices/void-or-refund/productCode/MY_PRODUCT_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>number</code> or <code>id</code></td>
<td><strong>Required</strong> Either Cheddar&#39;s ID for the invoice or the Cheddar-generated invoice number</td>
</tr>
<tr>
<td><code>remoteAddress</code></td>
<td><strong>Not Required (<a href="#fraud-protection-rate-limiting">see below</a>)</strong> Client IPv4 address</td>
</tr>
</tbody></table>

<aside class="notice">
  Many payment processors do not allow for voids. Voids are only possible for a
  short period of time after the transaction is executed. In short, determining
  whether to execute a void or a refund is a moving target. Fortunately, Cheddar
  has already figured that out. Using this call makes voids and refunds simple.
  A drawback of using this method is that partial refunds are not possible.
</aside>
<h3 id='send-or-resend-an-invoice-email'>Send or Resend an Invoice email</h3>
<p>Send (or resend) email notification for the invoice in the product
with  <code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/invoices/send-email/productCode/MY_PRODUCT_CODE</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>number</code> or <code>id</code></td>
<td><strong>Required</strong> Either Cheddar&#39;s ID for the invoice or the Cheddar-generated invoice number</td>
</tr>
<tr>
<td><code>remoteAddress</code></td>
<td><strong>Not Required (<a href="#fraud-protection-rate-limiting">see below</a>)</strong> Client IPv4 address</td>
</tr>
</tbody></table>

<aside class="notice">
  Email notifications must be enabled in your account.
  <a href="https://getcheddar.com/admin/emails">
    Check your settings here
  </a>.
  <br/>
  <br/>
  <p>
    Emails are automatically sent but if you'd like to resend one, just use this
    method. The most recent relevant email will be sent for the invoice. For
    example, if the most recent transaction was declined, the decline email is
    sent. If that most recent transaction was approved, the payment receipt email
    is sent.
  </p>
</aside>
<h2 id='promotions'>Promotions</h2><h3 id='get-all-promotions'>Get all Promotions</h3>
<p>Get all promotion data from the product with  <code>productCode=MY_PRODUCT_CODE</code></p>

<p><code>/promotions/get/productCode/MY_PRODUCT_CODE</code></p>
<h3 id='get-a-single-promotions'>Get a Single Promotions</h3>
<p>Get the promotion data from the product with  <code>productCode=MY_PRODUCT_CODE</code> for
the promotion with coupon <code>code=MY_COUPON_CODE</code></p>

<p><code>/promotions/get/productCode/MY_PRODUCT_CODE/code/MY_COUPON_CODE</code></p>
<h1 id='current-vs-outstanding-invoice'>Current vs. Outstanding Invoice</h1>
<p>Many API calls interact with a customer&#39;s subscription invoice. The &quot;current&quot;
subscription invoice is the one that is currently &quot;open&quot;. In other words, it is
scheduled to bill in the future. You can add charges, credits, and item
quantities to a subscription invoice. In almost every case, you&#39;ll want to
interact with the &quot;current&quot; subscription invoice. This is the default for all
relevant API calls. In rare cases, you might want to adjust the &quot;outstanding&quot;
subscription invoice.</p>

<p>An outstanding invoice is one that was scheduled to bill in the past but has
not yet been paid. This could be a scheduled invoice that was attempted but
declined (the subscriber is in the dunning process) or simply one that&#39;s
scheduled in the past but Cheddar&#39;s recurring engine hasn&#39;t picked it up
for execution yet. If a subscription is canceled for non-payment, it almost
certainly has an outstanding invoice.</p>

<p>Some API methods have a parameter named <code>invoicePeriod</code>. In the case when you want
to interact with the outstanding invoice, set the value for this parameter to
&quot;outstanding&quot;.</p>
<h1 id='response-codes'>Response Codes</h1><h2 id='http-status-codes'>HTTP Status Codes</h2>
<p>The Cheddar API returns appropriate HTTP status codes for every request.</p>

<table><thead>
<tr>
<th>Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td><code>200 OK</code></td>
<td>Success!</td>
</tr>
<tr>
<td><code>400 Bad Request</code></td>
<td>The request was invalid. An accompanying error message will explain why.</td>
</tr>
<tr>
<td><code>404 Not Found</code></td>
<td>The URI requested is invalid or the resource requested, such as a user, does not exist.</td>
</tr>
<tr>
<td><code>412 Precondition Failed</code></td>
<td>The request contains POST data that is in an invalid format or required parameters are missing.</td>
</tr>
<tr>
<td><code>422 Unprocessable Entity</code></td>
<td>The gateway doesn&#39;t like the payment data. In other words, the gateway failed to process the request.</td>
</tr>
<tr>
<td><code>500 Internal Server Error</code></td>
<td>Something is broken. Please post in the support forum so the Cheddar team can investigate.</td>
</tr>
<tr>
<td><code>502 Bad Gateway</code></td>
<td>Communication with the payment gateway failed. Try again later.</td>
</tr>
</tbody></table>
<h1 id='error-messages'>Error Messages</h1>
<p>When the Cheddar API returns error messages, it does so in XML format. For example, an error from an XML method might look like this:</p>

<p><code>&lt;error id=&quot;1234&quot; code=&quot;404&quot; auxCode=&quot;&quot;&gt;Customer not found&lt;/error&gt;</code></p>

<p>Errors are logged and exposed to you in the admin GUI: <a href="https://getcheddar.com/admin/activity/errors">https://getcheddar.com/admin/activity/errors</a></p>

<p><a href="http://support.getcheddar.com/kb/api-8/error-handling">More information about errors is available in this KB article</a></p>
<h1 id='fraud-protection-rate-limiting'>Fraud Protection, Rate Limiting</h1>
<p>All API requests should include the client IP address if possible. If not
provided, the IP of the machine making the request will be used. This value is
used for rate limiting, fraud protection, etc. To prevent the same fraudster
from attempting to signup for your service over and over and over again with
different credit card numbers, you&#39;ll need to provide the IP address with the
request.</p>
<h1 id='webhooks-reverse-api-callbacks'>Webhooks, Reverse API, Callbacks</h1>
<p>Yup, Cheddar supports custom webhooks as well as some pre-defined third
party hooks. The hook system is fault tolerant with automatic retries and
includes a management console and some other niceties at no extra charge
(ooh, burn!). Yeah, we&#39;re pretty proud of it.</p>

<p><a href="http://support.getcheddar.com/kb/api-8/web-hooks-service-hooks-and-captain-hooks">More information about webhooks</a></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cUrl</a>
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="ruby">ruby</a>
          </div>
      </div>
    </div>
  </body>
</html>
